import{o as oe,n as Ie,r as Ae,w as me,t as Ye,a as Y,c as Ne,g as Le,b as ze,d as Ue,s as qe,e as N,f as re,u as O,h as ce,i as V,j as f,k as r,l as t,m as H,p as T,q as I,_ as W,v as j,x as je,F as z,y as q,z as le,A as Ve,B as We,C as se,T as Je,D as Pe,E as Ge,G as Z,H as He,I as ue,J as Ke}from"./index-DtVSZOl4.js";function Xe(s){return ze()?(Ue(s),!0):!1}const Qe=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Ze=Object.prototype.toString,et=s=>Ze.call(s)==="[object Object]",tt=()=>{};function st(...s){if(s.length!==1)return Ye(...s);const e=s[0];return typeof e=="function"?Ae(Ne(()=>({get:e,set:tt}))):Y(e)}function at(s,e){function n(...c){return new Promise((b,C)=>{Promise.resolve(s(()=>e.apply(this,c),{fn:e,thisArg:this,args:c})).then(b).catch(C)})}return n}const Te=s=>s();function ot(s=Te,e={}){const{initialState:n="active"}=e,c=st(n==="active");function b(){c.value=!1}function C(){c.value=!0}const P=(...l)=>{c.value&&s(...l)};return{isActive:Ae(c),pause:b,resume:C,eventFilter:P}}function ye(s){return Array.isArray(s)?s:[s]}function nt(s){return Le()}function it(s,e,n={}){const{eventFilter:c=Te,...b}=n;return me(s,at(c,e),b)}function lt(s,e,n={}){const{eventFilter:c,initialState:b="active",...C}=n,{eventFilter:P,pause:l,resume:d,isActive:p}=ot(c,{initialState:b});return{stop:it(s,e,{...C,eventFilter:P}),pause:l,resume:d,isActive:p}}function rt(s,e=!0,n){nt()?oe(s,n):e?s():Ie(s)}function ct(s,e,n){return me(s,e,{...n,immediate:!0})}const Me=Qe?window:void 0;function ut(s){var e;const n=re(s);return(e=n==null?void 0:n.$el)!=null?e:n}function Se(...s){const e=[],n=()=>{e.forEach(l=>l()),e.length=0},c=(l,d,p,y)=>(l.addEventListener(d,p,y),()=>l.removeEventListener(d,p,y)),b=N(()=>{const l=ye(re(s[0])).filter(d=>d!=null);return l.every(d=>typeof d!="string")?l:void 0}),C=ct(()=>{var l,d;return[(d=(l=b.value)==null?void 0:l.map(p=>ut(p)))!=null?d:[Me].filter(p=>p!=null),ye(re(b.value?s[1]:s[0])),ye(O(b.value?s[2]:s[1])),re(b.value?s[3]:s[2])]},([l,d,p,y])=>{if(n(),!(l!=null&&l.length)||!(d!=null&&d.length)||!(p!=null&&p.length))return;const k=et(y)?{...y}:y;e.push(...l.flatMap(o=>d.flatMap(h=>p.map(g=>c(o,h,g,k)))))},{flush:"post"}),P=()=>{C(),n()};return Xe(n),P}const de=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},pe="__vueuse_ssr_handlers__",dt=pt();function pt(){return pe in de||(de[pe]=de[pe]||{}),de[pe]}function vt(s,e){return dt[s]||e}function mt(s){return s==null?"any":s instanceof Set?"set":s instanceof Map?"map":s instanceof Date?"date":typeof s=="boolean"?"boolean":typeof s=="string"?"string":typeof s=="object"?"object":Number.isNaN(s)?"any":"number"}const ft={boolean:{read:s=>s==="true",write:s=>String(s)},object:{read:s=>JSON.parse(s),write:s=>JSON.stringify(s)},number:{read:s=>Number.parseFloat(s),write:s=>String(s)},any:{read:s=>s,write:s=>String(s)},string:{read:s=>s,write:s=>String(s)},map:{read:s=>new Map(JSON.parse(s)),write:s=>JSON.stringify(Array.from(s.entries()))},set:{read:s=>new Set(JSON.parse(s)),write:s=>JSON.stringify(Array.from(s))},date:{read:s=>new Date(s),write:s=>s.toISOString()}},ke="vueuse-storage";function ae(s,e,n,c={}){var b;const{flush:C="pre",deep:P=!0,listenToStorageChanges:l=!0,writeDefaults:d=!0,mergeDefaults:p=!1,shallow:y,window:k=Me,eventFilter:o,onError:h=M=>{console.error(M)},initOnMounted:g}=c,w=(y?qe:Y)(typeof e=="function"?e():e),u=N(()=>re(s));if(!n)try{n=vt("getDefaultStorage",()=>{var M;return(M=Me)==null?void 0:M.localStorage})()}catch(M){h(M)}if(!n)return w;const v=re(e),S=mt(v),A=(b=c.serializer)!=null?b:ft[S],{pause:E,resume:R}=lt(w,()=>K(w.value),{flush:C,deep:P,eventFilter:o});me(u,()=>L(),{flush:C}),k&&l&&rt(()=>{n instanceof Storage?Se(k,"storage",L,{passive:!0}):Se(k,ke,J),g&&L()}),g||L();function F(M,i){if(k){const B={key:u.value,oldValue:M,newValue:i,storageArea:n};k.dispatchEvent(n instanceof Storage?new StorageEvent("storage",B):new CustomEvent(ke,{detail:B}))}}function K(M){try{const i=n.getItem(u.value);if(M==null)F(i,null),n.removeItem(u.value);else{const B=A.write(M);i!==B&&(n.setItem(u.value,B),F(i,B))}}catch(i){h(i)}}function ee(M){const i=M?M.newValue:n.getItem(u.value);if(i==null)return d&&v!=null&&n.setItem(u.value,A.write(v)),v;if(!M&&p){const B=A.read(i);return typeof p=="function"?p(B,v):S==="object"&&!Array.isArray(B)?{...v,...B}:B}else return typeof i!="string"?i:A.read(i)}function L(M){if(!(M&&M.storageArea!==n)){if(M&&M.key==null){w.value=v;return}if(!(M&&M.key!==u.value)){E();try{(M==null?void 0:M.newValue)!==A.write(w.value)&&(w.value=ee(M))}catch(i){h(i)}finally{M?Ie(R):R()}}}}function J(M){L(M.detail)}return w}function Ee(){const s=ae("orbit-idler-ops",10),e=ae("orbit-idler-mps",0),n=ae("orbit-idler-last-save",Date.now()),c=ae("orbit-idler-settings",{autosaveEnabled:!0,autosaveInterval:5,soundEnabled:!0,particleEffects:!0,darkMode:!1}),b=Y(!1),C=Y(null);let P=null,l=null;const d=Y(Date.now()),p=ae("orbit-idler-bodies",[{id:"star-1",type:"star",name:"Sol",mass:100,opYield:0,color:"#FDB813",size:50,level:1,upgradeBaseCost:5}]),y=N(()=>p.value.find(a=>a.type==="star")),k=N(()=>p.value.filter(a=>a.type==="planet"||a.type==="gas-giant")),o=N(()=>p.value.filter(a=>a.type==="gas-giant")),h=a=>{switch(a.type){case"star":return 40+Math.sqrt(a.mass)*.5;case"planet":return 15+Math.sqrt(a.mass)*.7;case"gas-giant":return 25+Math.sqrt(a.mass)*.9;case"moon":return 8+Math.sqrt(a.mass)*.5;default:return a.size}},g=a=>{s.value+=a},w=a=>s.value>=a?(s.value-=a,!0):!1,u=a=>w(a)?(e.value+=a/10,!0):!1,v=a=>e.value>=a?(e.value-=a,!0):!1,S=a=>{var m,_;if(w(a)){const G=k.value.length+1,x={id:`planet-${Date.now()}`,type:"planet",name:`Planet ${k.value.length+1}`,mass:10,orbitRadius:G,parentId:(m=y.value)==null?void 0:m.id,orbitalPeriod:i(G,((_=y.value)==null?void 0:_.mass)||100),opYield:5,lastOrbitTime:Date.now(),color:B(),size:20,moons:[],level:1,upgradeBaseCost:3};return x.size=h(x),p.value.push(x),$(),!0}return!1},A=(a,m)=>{if(w(m)){const _=p.value.find(X=>X.id===a);if(!_)return!1;_.moons||(_.moons=[]);const G=_.moons.length+1,x={id:`moon-${Date.now()}`,type:"moon",name:`Moon ${_.moons.length+1}`,mass:2,orbitRadius:G,parentId:_.id,orbitalPeriod:i(G,_.mass)*.3,opYield:2,lastOrbitTime:Date.now(),color:te(),size:8,level:1,upgradeBaseCost:2};return x.size=h(x),_.type==="gas-giant"&&_.bonusMultiplier&&(x.opYield=Math.floor(x.opYield*_.bonusMultiplier)),_.moons.push(x),$(),!0}return!1},E=a=>{const m=R(a);if(!m||!m.upgradeBaseCost||!m.level)return!1;const _=Math.floor(m.upgradeBaseCost*Math.pow(1.5,m.level-1));if(v(_)){const G=F(m);return m.mass+=G,m.size=h(m),m.level+=1,m.opYield=K(m),m.type==="star"&&ee(),m.type==="planet"&&L(m),m.type==="gas-giant"&&M(m),$(),!0}return!1},R=a=>{const m=p.value.find(_=>_.id===a);if(m)return m;for(const _ of k.value)if(_.moons){const G=_.moons.find(x=>x.id===a);if(G)return G}},F=a=>{switch(a.type){case"star":return 20;case"planet":return 10;case"gas-giant":return 15;case"moon":return 5;default:return 5}},K=a=>{switch(a.type){case"star":return 0;case"planet":return Math.floor(5+Math.sqrt(a.mass)*.5);case"gas-giant":{const m=Math.floor(10+Math.sqrt(a.mass)*.8);return a.bonusMultiplier?Math.floor(m*a.bonusMultiplier):m}case"moon":{const m=Math.floor(2+Math.sqrt(a.mass)*.3),_=a.parentId?R(a.parentId):void 0;return(_==null?void 0:_.type)==="gas-giant"&&_.bonusMultiplier?Math.floor(m*_.bonusMultiplier):m}default:return a.opYield}},ee=()=>{var m;const a=((m=y.value)==null?void 0:m.mass)||100;for(const _ of k.value)_.orbitRadius&&(_.orbitalPeriod=i(_.orbitRadius,a))},L=a=>{if(a.type==="planet"&&a.mass>=200){const m=a.color;a.type="gas-giant",a.color=ie(),a.opYield=Math.floor(a.opYield*1.5),a.specialAbilities=J(a),M(a),a.size=h(a),C.value={...a,originalColor:m},b.value=!0}},J=a=>{const m=["Rings of Prosperity","Magnetic Amplifier","Gravitational Well","Resource Abundance"],_=a.mass>300?2:1,G=[];for(let x=0;x<_;x++){const X=m.filter(U=>!G.includes(U));if(X.length>0){const U=X[Math.floor(Math.random()*X.length)];G.push(U)}}return M(a,G),G},M=(a,m)=>{const _=m||a.specialAbilities;if(_){a.bonusMultiplier=1.5;for(const G of _)switch(G){case"Rings of Prosperity":a.bonusMultiplier*=1.2;break;case"Magnetic Amplifier":if(a.moons&&a.moons.length>0)for(const x of a.moons)x.opYield=K(x);a.bonusMultiplier*=1.3;break}a.opYield=K(a)}},i=(a,m)=>Math.floor(10*Math.pow(a,1.5)/Math.sqrt(m)),B=()=>{const a=["#3498DB","#27AE60","#9B59B6","#F1C40F","#E67E22","#E74C3C"];return a[Math.floor(Math.random()*a.length)]},te=()=>{const a=["#BDC3C7","#ECF0F1","#95A5A6","#7F8C8D","#D0D3D4"];return a[Math.floor(Math.random()*a.length)]},ie=()=>{const a=["#F39C12","#D35400","#C0392B","#8E44AD","#2980B9"];return a[Math.floor(Math.random()*a.length)]},ne=()=>{const a=Date.now();(a-d.value)/1e3,d.value=a;for(const m of k.value){if(m.orbitalPeriod&&m.lastOrbitTime){const _=(a-m.lastOrbitTime)/1e3;_>=m.orbitalPeriod&&(g(m.opYield),m.lastOrbitTime=a-(_-m.orbitalPeriod)*1e3)}if(m.moons&&m.moons.length>0){for(const _ of m.moons)if(_.orbitalPeriod&&_.lastOrbitTime){const G=(a-_.lastOrbitTime)/1e3;G>=_.orbitalPeriod&&(g(_.opYield),_.lastOrbitTime=a-(G-_.orbitalPeriod)*1e3)}}}P=requestAnimationFrame(ne)},$=()=>{n.value=Date.now()},D=()=>{const a=Date.now(),_=(a-n.value)/1e3;let G=0;const x=[],X=[];for(const U of k.value)if(U.orbitalPeriod&&U.orbitalPeriod>0){const be=Math.floor(_/U.orbitalPeriod),Ce=be*U.opYield;if(G+=Ce,be>0&&x.push({planetName:U.name,orbits:be,opsGained:Ce}),U.lastOrbitTime){const Q=_%U.orbitalPeriod;U.lastOrbitTime=a-Q*1e3}if(U.moons&&U.moons.length>0){for(const Q of U.moons)if(Q.orbitalPeriod&&Q.orbitalPeriod>0){const he=Math.floor(_/Q.orbitalPeriod),$e=he*Q.opYield;if(G+=$e,he>0&&X.push({moonName:Q.name,planetName:U.name,orbits:he,opsGained:$e}),Q.lastOrbitTime){const Re=_%Q.orbitalPeriod;Q.lastOrbitTime=a-Re*1e3}}}}return s.value+=G,$(),{elapsedTime:_,totalOPsGained:G,planetOrbits:x,moonOrbits:X}},fe=()=>(Date.now()-n.value)/1e3>=60?D():null,ge=()=>{try{$();const a={timestamp:Date.now(),orbitPoints:s.value,massPoints:e.value,celestialBodies:p.value,exportVersion:"1.0.0",settings:c.value};return localStorage.setItem("orbit-idler-current-save",JSON.stringify(a)),!0}catch(a){return console.error("Failed to save game:",a),!1}},_e=a=>{try{return a.exportVersion?(s.value=a.orbitPoints,e.value=a.massPoints,p.value=a.celestialBodies,a.settings&&(c.value=a.settings),$(),!0):(console.error("Invalid save data: missing export version"),!1)}catch(m){return console.error("Failed to load game:",m),!1}},Fe=()=>{try{return s.value=10,e.value=0,p.value=[{id:"star-1",type:"star",name:"Sol",mass:100,opYield:0,color:"#FDB813",size:50,level:1,upgradeBaseCost:5}],$(),!0}catch(a){return console.error("Failed to reset game:",a),!1}},Be=()=>{try{const a={timestamp:Date.now(),orbitPoints:s.value,massPoints:e.value,celestialBodies:p.value,exportVersion:"1.0.0",settings:c.value};return btoa(JSON.stringify(a))}catch(a){return console.error("Failed to export game:",a),""}},De=a=>{try{const m=JSON.parse(atob(a));return _e(m)}catch(m){return console.error("Failed to import game:",m),!1}},we=()=>{if(l!==null&&clearInterval(l),c.value.autosaveEnabled){const a=c.value.autosaveInterval*60*1e3;l=setInterval(()=>{ge()},a)}},xe=a=>{c.value={...c.value,...a},we()};return oe(()=>{we()}),ce(()=>{l!==null&&clearInterval(l)}),oe(()=>{fe(),P=setInterval(ne,100)}),ce(()=>{P!==null&&clearInterval(P),ge()}),{orbitPoints:s,massPoints:e,celestialBodies:p,star:y,planets:k,gasGiants:o,addOrbitPoints:g,spendOrbitPoints:w,convertToMassPoints:u,spendMassPoints:v,purchasePlanet:S,purchaseMoon:A,upgradeMass:E,findCelestialBodyById:R,calculateOrbitalPeriod:i,getGasGiantAbilities:a=>{const m=R(a);return(m==null?void 0:m.type)==="gas-giant"&&m.specialAbilities?m.specialAbilities:[]},getMaxMoonsForPlanet:a=>{var _;let m=Math.floor(Math.sqrt(a.mass)/2);return a.type==="gas-giant"&&((_=a.specialAbilities)!=null&&_.includes("Gravitational Well"))&&(m=Math.floor(m*1.5)),m},getMoonCostForPlanet:(a,m)=>{var x,X;const _=((x=a.moons)==null?void 0:x.length)||0;let G=Math.floor(m*Math.pow(1.3,_));return a.type==="gas-giant"&&((X=a.specialAbilities)!=null&&X.includes("Resource Abundance"))&&(G=Math.floor(G*.7)),G},saveGame:ge,loadGame:_e,resetGame:Fe,exportGameSave:Be,importGameSave:De,checkOfflineProgress:fe,settings:c,updateSettings:xe,showTransformation:b,transformingPlanet:C,calculateOfflineProgress:D}}function gt(){const s=ae("orbit-idler-balance-config",{baseOpYieldPlanet:5,baseOpYieldMoon:2,baseOpYieldGasGiant:10,massScalingPlanet:.7,massScalingMoon:.4,massScalingGasGiant:1,massScalingStar:.6,basePlanetCost:10,baseMoonCost:5,costScalingPlanet:1.5,costScalingMoon:1.3,massUpgradeScaling:1.4,baseUpgradeCostStar:5,baseUpgradeCostPlanet:3,baseUpgradeCostMoon:2,baseUpgradeCostGasGiant:4,massIncreaseStar:25,massIncreasePlanet:12,massIncreaseGasGiant:18,massIncreaseMoon:6,orbitalPeriodConstant:10,orbitalPeriodRadiusExponent:1.5,moonOrbitalSpeedFactor:.3,gasGiantMassThreshold:200,gasGiantYieldMultiplier:1.6,ringsProsperityBonus:1.3,magneticAmplifierBonus:1.4,gravitationalWellBonus:1.6,resourceAbundanceDiscount:.65,moonCapacityDivisor:1.75,orbitSpeedScalingWithMass:.02,opYieldBonusPerLevel:.05,upgradeCostReductionPerLevel:.01});return{balanceConfig:s,calculateOpYield:(o,h)=>{var v;let g=0,w=0;switch(o.type){case"star":return 0;case"planet":g=s.value.baseOpYieldPlanet,w=s.value.massScalingPlanet;break;case"gas-giant":g=s.value.baseOpYieldGasGiant,w=s.value.massScalingGasGiant;break;case"moon":g=s.value.baseOpYieldMoon,w=s.value.massScalingMoon;break}let u=Math.floor(g+Math.pow(o.mass,.6)*w);if(o.level&&o.level>1){const S=1+(o.level-1)*s.value.opYieldBonusPerLevel;u=Math.floor(u*S)}return o.type==="gas-giant"&&o.bonusMultiplier&&(u=Math.floor(u*o.bonusMultiplier)),o.type==="moon"&&(h==null?void 0:h.type)==="gas-giant"&&(v=h.specialAbilities)!=null&&v.includes("Magnetic Amplifier")&&(u=Math.floor(u*s.value.magneticAmplifierBonus)),u},calculatePlanetCost:o=>Math.floor(s.value.basePlanetCost*Math.pow(s.value.costScalingPlanet,o)),calculateMoonCost:(o,h)=>{var w;let g=Math.floor(s.value.baseMoonCost*Math.pow(s.value.costScalingMoon,h));return o.type==="gas-giant"&&((w=o.specialAbilities)!=null&&w.includes("Resource Abundance"))&&(g=Math.floor(g*s.value.resourceAbundanceDiscount)),g},calculateUpgradeCost:o=>!o.upgradeBaseCost||!o.level?0:Math.floor(o.upgradeBaseCost*Math.pow(s.value.massUpgradeScaling,o.level-1)),calculateMassIncrease:o=>{switch(o.type){case"star":return s.value.massIncreaseStar;case"planet":return s.value.massIncreasePlanet;case"gas-giant":return s.value.massIncreaseGasGiant;case"moon":return s.value.massIncreaseMoon;default:return 0}},calculateOrbitalPeriod:(o,h,g=!1)=>{const w=s.value.orbitalPeriodConstant*Math.pow(o,s.value.orbitalPeriodRadiusExponent)/Math.sqrt(h),u=1-Math.log10(h)*s.value.orbitSpeedScalingWithMass,v=Math.max(.5,u);return g?w*s.value.moonOrbitalSpeedFactor*v:w*v},calculateMaxMoons:o=>{var w;if(o.type==="star")return 0;let h=Math.floor(Math.sqrt(o.mass)/s.value.moonCapacityDivisor);h=Math.max(1,h),o.type==="gas-giant"&&((w=o.specialAbilities)!=null&&w.includes("Gravitational Well"))&&(h=Math.floor(h*s.value.gravitationalWellBonus));const g=[{mass:50,maxMoons:2},{mass:100,maxMoons:3},{mass:150,maxMoons:4},{mass:200,maxMoons:5},{mass:300,maxMoons:7},{mass:500,maxMoons:10},{mass:1e3,maxMoons:15}];for(let u=g.length-1;u>=0;u--)if(o.mass>=g[u].mass)return Math.max(h,g[u].maxMoons);return h},calculateSize:o=>{switch(o.type){case"star":return 40+Math.sqrt(o.mass)*.5;case"planet":return 15+Math.sqrt(o.mass)*.7;case"gas-giant":return 25+Math.sqrt(o.mass)*.9;case"moon":return 8+Math.sqrt(o.mass)*.5;default:return o.size}},shouldEvolveToGasGiant:o=>o.type==="planet"&&o.mass>=s.value.gasGiantMassThreshold,getGasGiantBaseMultiplier:()=>s.value.gasGiantYieldMultiplier,updateBalanceConfig:o=>{s.value={...s.value,...o}}}}function bt(s){const e=Y([]),n=Y([]),c=ae("orbit-idler-interaction-check",Date.now()),b=ae("orbit-idler-interaction-config",{alignmentCheckInterval:1e4,alignmentBaseChance:.1,conjunctionMultiplier:1.5,oppositionMultiplier:1.25,resonanceMultiplier:2,alignmentMinDuration:3e4,alignmentMaxDuration:12e4,gravityEffectRadius:.5,gravityEffectMagnitude:.2,gravityEffectDuration:6e4}),C=()=>{const o=Date.now();if(o-c.value<b.value.alignmentCheckInterval)return;c.value=o,e.value=e.value.filter(F=>o<F.timestamp+F.duration);const h=s.value.filter(F=>F.type==="planet"||F.type==="gas-giant");if(h.length<2||Math.random()>b.value.alignmentBaseChance)return;const g=["conjunction","opposition","resonance"],w=g[Math.floor(Math.random()*g.length)],u=w==="resonance"?2:2+Math.floor(Math.random()*Math.min(3,h.length-2)),v=y(h,u),S=b.value.alignmentMinDuration+Math.random()*(b.value.alignmentMaxDuration-b.value.alignmentMinDuration);let A=1,E="";switch(w){case"conjunction":A=b.value.conjunctionMultiplier,E=`Celestial Conjunction: ${v.map(F=>F.name).join(" and ")} have aligned, boosting their OP yield by ${Math.round((A-1)*100)}%!`;break;case"opposition":A=b.value.oppositionMultiplier,E=`Planetary Opposition: ${v.map(F=>F.name).join(" and ")} are perfectly opposed, increasing their OP yield by ${Math.round((A-1)*100)}%!`;break;case"resonance":A=b.value.resonanceMultiplier,E=`Orbital Resonance: ${v.map(F=>F.name).join(" and ")} have entered resonance, doubling their OP yield!`;break}const R={bodies:v.map(F=>F.id),type:w,timestamp:o,duration:S,multiplier:A,description:E};return e.value.push(R),R},P=()=>{const o=Date.now();n.value=n.value.filter(g=>o<g.duration+o);const h=s.value.filter(g=>g.type==="planet"||g.type==="gas-giant");if(!(h.length<2))for(let g=0;g<h.length;g++){const w=h[g];if(w.orbitRadius)for(let u=0;u<h.length;u++){if(g===u)continue;const v=h[u];if(!v.orbitRadius)continue;const S=Math.abs(w.orbitRadius-v.orbitRadius),A=w.orbitRadius*b.value.gravityEffectRadius;if(S<=A){const E=w.mass>v.mass,R=v.orbitRadius<w.orbitRadius,F=E&&R||!E&&!R?"acceleration":"deceleration",K=Math.abs(w.mass-v.mass)/Math.max(w.mass,v.mass),ee=1-S/A,L=K*ee*b.value.gravityEffectMagnitude,J={sourcePlanetId:w.id,targetPlanetId:v.id,type:F,magnitude:L,duration:b.value.gravityEffectDuration},M=n.value.findIndex(i=>i.sourcePlanetId===J.sourcePlanetId&&i.targetPlanetId===J.targetPlanetId);M>=0?n.value[M]=J:n.value.push(J)}}}},l=o=>{const h=e.value.filter(g=>g.bodies.includes(o));return h.length===0?1:Math.max(...h.map(g=>g.multiplier))},d=(o,h)=>{const g=n.value.filter(u=>u.targetPlanetId===o);if(g.length===0)return h;let w=h;for(const u of g)u.type==="acceleration"?w*=1-u.magnitude:w*=1+u.magnitude;return Math.max(1,Math.floor(w))},p=()=>{const o=Date.now();return e.value.filter(h=>o<h.timestamp+h.duration)},y=(o,h)=>{if(h>=o.length)return[...o];const g=[],w=new Set;for(;g.length<h;){const u=Math.floor(Math.random()*o.length);w.has(u)||(w.add(u),g.push(o[u]))}return g};return{alignments:e,gravitationalEffects:n,checkForAlignments:C,checkForGravitationalEffects:P,getAlignmentMultiplier:l,applyGravitationalEffects:d,getActiveAlignments:p,calculatePlanetaryGravitationalInteractions:()=>{const o=s.value.filter(h=>h.type==="planet"||h.type==="gas-giant");if(!(o.length<2))for(let h=0;h<o.length;h++){const g=o[h];if(!(!g.orbitRadius||!g.angle))for(let w=h+1;w<o.length;w++){const u=o[w];if(!u.orbitRadius||!u.angle)continue;const v=g.angle,S=u.angle,A=g.orbitRadius,E=u.orbitRadius,R=A*Math.cos(v),F=A*Math.sin(v),K=E*Math.cos(S),ee=E*Math.sin(S),L=Math.sqrt(Math.pow(K-R,2)+Math.pow(ee-F,2)),J=(g.size+u.size)*.5;if(L<=J){const B=g.mass*u.mass/Math.pow(L,2)*.001,te=u.mass/(g.mass+u.mass),ie=g.mass/(g.mass+u.mass);if(g.orbitalPeriod){const D=g.orbitalPeriod*(1-B*te);g.temporaryOrbitalPeriod=Math.max(D,g.orbitalPeriod*.5)}if(u.orbitalPeriod){const D=u.orbitalPeriod*(1-B*ie);u.temporaryOrbitalPeriod=Math.max(D,u.orbitalPeriod*.5)}const ne={sourcePlanetId:g.id,targetPlanetId:u.id,type:"acceleration",magnitude:B,duration:2e3};n.value.some(D=>D.sourcePlanetId===g.id&&D.targetPlanetId===u.id||D.sourcePlanetId===u.id&&D.targetPlanetId===g.id)||n.value.push(ne)}else g.temporaryOrbitalPeriod&&delete g.temporaryOrbitalPeriod,u.temporaryOrbitalPeriod&&delete u.temporaryOrbitalPeriod}}},interactionConfig:b}}const ht={class:"resource-counter"},yt={class:"resource-counter-icon"},Mt={key:0,class:"orbit-icon"},Pt={key:1,class:"mass-icon"},_t={class:"resource-counter-value"},wt={class:"resource-counter-label"},Ct=V({__name:"ResourceCounter",props:{value:{},type:{},label:{}},setup(s){const e=s,n=N(()=>e.value.toLocaleString("en-US",{maximumFractionDigits:0})),c=N(()=>e.label?e.label:e.type==="orbit"?"Orbit Points":"Mass Points");return(b,C)=>(r(),f("div",ht,[t("div",{class:H(["resource-counter-item",{"resource-counter-orbit":b.type==="orbit","resource-counter-mass":b.type==="mass"}])},[t("div",yt,[b.type==="orbit"?(r(),f("div",Mt)):b.type==="mass"?(r(),f("div",Pt)):T("",!0)]),t("div",_t,I(n.value),1),t("div",wt,I(c.value),1)],2)]))}}),Oe=W(Ct,[["__scopeId","data-v-6e60806e"]]),$t={class:"star-container","data-test":"star-component"},St={key:0,class:"star-label"},kt=V({__name:"Star",props:{star:{},showLabel:{type:Boolean}},setup(s){return(e,n)=>(r(),f("div",$t,[t("div",{class:"star",style:j({width:`${e.star.size}px`,height:`${e.star.size}px`,backgroundColor:e.star.color})},[e.showLabel?(r(),f("div",St,I(e.star.name),1)):T("",!0)],4)]))}}),Ot=W(kt,[["__scopeId","data-v-4519524b"]]),It={key:0,class:"planet-rings"},At={key:1,class:"ability-indicators"},Gt=["title"],Tt={key:2,class:"planet-label"},Et=V({__name:"Planet",props:{planet:{},addOrbitPoints:{type:Function},showLabel:{type:Boolean}},emits:["click"],setup(s){const e=s,n=Y(0),c=l=>{if(e.planet.orbitalPeriod&&e.planet.lastOrbitTime){const d=e.planet.temporaryOrbitalPeriod||e.planet.orbitalPeriod,p=(l-e.planet.lastOrbitTime)/1e3,y=2*Math.PI;let k=p/d*y;k>=y&&(e.addOrbitPoints(e.planet.opYield),e.planet.lastOrbitTime=l,k=k%y),n.value=k,e.planet.angle=n.value}},b=N(()=>{if(!e.planet.orbitRadius)return{x:0,y:0};const d=e.planet.orbitRadius*30,p=d*Math.cos(n.value),y=d*Math.sin(n.value);return{x:p,y}});let C=null;const P=()=>{c(Date.now()),C=requestAnimationFrame(P)};return oe(()=>{e.planet.lastOrbitTime||(e.planet.lastOrbitTime=Date.now()),e.planet.angle===void 0&&(e.planet.angle=0),C=requestAnimationFrame(P)}),ce(()=>{C!==null&&cancelAnimationFrame(C)}),(l,d)=>(r(),f("div",{class:"planet-container",style:j({transform:`translate(${b.value.x}px, ${b.value.y}px)`}),onClick:d[0]||(d[0]=p=>l.$emit("click"))},[t("div",{class:H(["planet",{"gas-giant":l.planet.type==="gas-giant"}]),style:j({width:`${l.planet.size}px`,height:`${l.planet.size}px`,backgroundColor:l.planet.color})},[l.planet.type==="gas-giant"?(r(),f("div",It)):T("",!0),l.planet.type==="gas-giant"&&l.planet.specialAbilities?(r(),f("div",At,[(r(!0),f(z,null,q(l.planet.specialAbilities,p=>(r(),f("div",{key:p,class:"ability-indicator",title:p},null,8,Gt))),128))])):T("",!0),l.showLabel?(r(),f("div",Tt,I(l.planet.name),1)):T("",!0)],6),je(l.$slots,"default",{},void 0)],4))}}),Ft=W(Et,[["__scopeId","data-v-ba1fa536"]]),Bt={key:0,class:"moon-label"},Dt=V({__name:"Moon",props:{moon:{},planetPosition:{},addOrbitPoints:{type:Function},showLabel:{type:Boolean}},setup(s){const e=s,n=Y(0),c=l=>{if(e.moon.orbitalPeriod&&e.moon.lastOrbitTime){const d=(l-e.moon.lastOrbitTime)/1e3,p=2*Math.PI;let y=d/e.moon.orbitalPeriod*p;y>=p&&(e.addOrbitPoints(e.moon.opYield),e.moon.lastOrbitTime=l,y=y%p),n.value=y}},b=N(()=>{if(!e.moon.orbitRadius)return e.planetPosition;const d=e.moon.orbitRadius*10,p=d*Math.cos(n.value),y=d*Math.sin(n.value);return{x:e.planetPosition.x+p,y:e.planetPosition.y+y}});let C=null;const P=()=>{c(Date.now()),C=requestAnimationFrame(P)};return oe(()=>{e.moon.lastOrbitTime||(e.moon.lastOrbitTime=Date.now()),C=requestAnimationFrame(P)}),ce(()=>{C!==null&&cancelAnimationFrame(C)}),(l,d)=>(r(),f("div",{class:"moon-container",style:j({transform:`translate(${b.value.x}px, ${b.value.y}px)`})},[t("div",{class:"moon",style:j({width:`${l.moon.size}px`,height:`${l.moon.size}px`,backgroundColor:l.moon.color})},[l.showLabel?(r(),f("div",Bt,I(l.moon.name),1)):T("",!0)],4)],4))}}),xt=W(Dt,[["__scopeId","data-v-7d5c4f22"]]),Rt={class:"planet-purchase"},Yt={class:"planet-preview"},Nt={class:"purchase-info"},Lt={class:"purchase-cost"},zt=["disabled"],Ut=V({__name:"PlanetPurchase",props:{cost:{},availableOPs:{},onPurchase:{type:Function}},setup(s){const e=s,n=N(()=>e.availableOPs>=e.cost),c=["#3498db","#e74c3c","#2ecc71","#f39c12","#9b59b6","#1abc9c"],b=Y(c[Math.floor(Math.random()*c.length)]),C=()=>{n.value&&(e.onPurchase(),b.value=c[Math.floor(Math.random()*c.length)])};return(P,l)=>(r(),f("div",Rt,[t("div",Yt,[t("div",{class:"preview-planet",style:j({width:"30px",height:"30px",backgroundColor:b.value})},null,4)]),t("div",Nt,[l[0]||(l[0]=t("div",{class:"purchase-title"},"Purchase New Planet",-1)),t("div",Lt,"Cost: "+I(P.cost)+" OPs",1)]),t("button",{class:"purchase-button",onClick:C,disabled:!n.value}," Buy ",8,zt)]))}}),qt=W(Ut,[["__scopeId","data-v-461dace0"]]),jt={class:"moon-purchase"},Vt={class:"moon-preview"},Wt={class:"purchase-info"},Jt={class:"purchase-title"},Ht={class:"purchase-cost"},Kt=["disabled"],Xt=V({__name:"MoonPurchase",props:{planet:{},cost:{},availableOPs:{},onPurchase:{type:Function}},setup(s){const e=s,n=N(()=>e.availableOPs>=e.cost),c=["#bdc3c7","#ecf0f1","#95a5a6","#7f8c8d","#d0d3d4"],b=Y(c[Math.floor(Math.random()*c.length)]),C=()=>{n.value&&(e.onPurchase(),b.value=c[Math.floor(Math.random()*c.length)])};return(P,l)=>(r(),f("div",jt,[t("div",Vt,[t("div",{class:"parent-planet",style:j({backgroundColor:P.planet.color})},null,4),t("div",{class:"preview-moon",style:j({width:"15px",height:"15px",backgroundColor:b.value})},null,4)]),t("div",Wt,[t("div",Jt,"Add Moon to "+I(P.planet.name),1),t("div",Ht,"Cost: "+I(P.cost)+" OPs",1)]),t("button",{class:"purchase-button",onClick:C,disabled:!n.value}," Buy ",8,Kt)]))}}),Qt=W(Xt,[["__scopeId","data-v-8ac120de"]]),Zt={class:"upgrade-header"},es={class:"upgrade-title"},ts={class:"body-name"},ss={class:"body-stats"},as={class:"upgrade-details"},os={class:"upgrade-benefit"},ns={key:0,class:"value"},is={key:1,class:"value"},ls={key:2,class:"value"},rs={class:"upgrade-cost"},cs=["disabled"],us=V({__name:"MassUpgrade",props:{body:{},availableMPs:{},onUpgrade:{type:Function}},setup(s){const e=s,n=N(()=>!e.body.upgradeBaseCost||!e.body.level?0:Math.floor(e.body.upgradeBaseCost*Math.pow(1.5,e.body.level-1))),c=N(()=>e.availableMPs>=n.value),b=N(()=>{switch(e.body.type){case"star":return 20;case"planet":return 10;case"gas-giant":return 15;case"moon":return 5;default:return 5}}),C=N(()=>e.body.opYield),P=N(()=>{switch(e.body.type){case"star":return 0;case"planet":return Math.floor(5+Math.sqrt(e.body.mass+b.value)*.5);case"gas-giant":return Math.floor(10+Math.sqrt(e.body.mass+b.value)*.8);case"moon":return Math.floor(2+Math.sqrt(e.body.mass+b.value)*.3);default:return e.body.opYield}}),l=()=>{c.value&&e.onUpgrade(e.body.id)};return(d,p)=>(r(),f("div",{class:H(["mass-upgrade",{"not-affordable":!c.value}])},[t("div",Zt,[t("div",{class:"body-icon",style:j({backgroundColor:d.body.color})},null,4),t("div",es,[t("div",ts,I(d.body.name),1),t("div",ss," Level "+I(d.body.level)+" â€¢ Mass: "+I(d.body.mass),1)])]),t("div",as,[t("div",os,[p[0]||(p[0]=t("span",{class:"label"},"Upgrade effect:",-1)),d.body.type==="star"?(r(),f("span",ns," Faster orbital speeds for all planets ")):d.body.type==="gas-giant"?(r(),f("span",is," Mass +"+I(b.value)+" â€¢ OP Yield: "+I(C.value)+" â†’ "+I(P.value),1)):(r(),f("span",ls," Mass +"+I(b.value)+" â€¢ OP Yield: "+I(C.value)+" â†’ "+I(P.value),1))]),t("div",rs,[t("span",null,"Cost: "+I(n.value)+" MPs",1)])]),t("button",{class:"upgrade-button",onClick:l,disabled:!c.value}," Upgrade ",8,cs)],2))}}),ve=W(us,[["__scopeId","data-v-ee71fe0b"]]),ds={class:"save-load-container"},ps={class:"actions"},vs={key:0,class:"saves-list"},ms={class:"save-info"},fs={class:"save-title"},gs={class:"save-timestamp"},bs={class:"save-actions"},hs=["onClick"],ys=["onClick"],Ms={key:1,class:"no-saves"},Ps={key:2,class:"import-dialog"},_s={class:"dialog-content"},ws={class:"dialog-actions"},Cs=V({__name:"SaveLoad",setup(s){const e=Ee(),n=Y([]),c=Y(!1),b=Y(""),C=Y({show:!1,message:"",type:"success"}),P=N(()=>n.value.length>0);oe(()=>{l()});function l(){try{const v=localStorage.getItem("orbit-idler-saved-games");v&&(n.value=JSON.parse(v))}catch(v){console.error("Error loading saved games:",v)}}function d(){try{const v={timestamp:Date.now(),orbitPoints:e.orbitPoints.value,massPoints:e.massPoints.value,celestialBodies:e.celestialBodies.value,exportVersion:"1.0.0"};n.value.unshift(v),n.value.length>5&&(n.value=n.value.slice(0,5)),localStorage.setItem("orbit-idler-saved-games",JSON.stringify(n.value)),u("Game saved successfully!","success")}catch(v){console.error("Error saving game:",v),u("Failed to save game","error")}}function p(v){try{const S=n.value[v];if(!S)return;e.orbitPoints.value=S.orbitPoints,e.massPoints.value=S.massPoints,e.celestialBodies.value=S.celestialBodies,localStorage.setItem("orbit-idler-last-load",Date.now().toString()),u("Game loaded successfully!","success")}catch(S){console.error("Error loading game:",S),u("Failed to load game","error")}}function y(v){n.value.splice(v,1),localStorage.setItem("orbit-idler-saved-games",JSON.stringify(n.value)),u("Save deleted","success")}function k(){try{const v={timestamp:Date.now(),orbitPoints:e.orbitPoints.value,massPoints:e.massPoints.value,celestialBodies:e.celestialBodies.value,exportVersion:"1.0.0"},S=btoa(JSON.stringify(v));navigator.clipboard.writeText(S).then(()=>{u("Save code copied to clipboard!","success")}).catch(A=>{console.error("Could not copy text: ",A),u("Copy to clipboard failed. Save code is shown below.","error"),b.value=S,c.value=!0})}catch(v){console.error("Error exporting save:",v),u("Failed to export save","error")}}function o(){try{if(!b.value.trim()){u("Please enter a save code","error");return}const v=JSON.parse(atob(b.value));if(!v.exportVersion||!v.celestialBodies){u("Invalid save code format","error");return}e.orbitPoints.value=v.orbitPoints,e.massPoints.value=v.massPoints,e.celestialBodies.value=v.celestialBodies,localStorage.setItem("orbit-idler-last-load",Date.now().toString()),c.value=!1,b.value="",u("Game imported successfully!","success")}catch(v){console.error("Error importing save:",v),u("Failed to import save. Invalid save code.","error")}}function h(v){const S=v.celestialBodies.filter(E=>E.type==="planet"||E.type==="gas-giant").length,A=v.celestialBodies.filter(E=>E.type==="moon").length;return`${S} Planets, ${A} Moons - ${g(v.orbitPoints)} OPs`}function g(v){return v>=1e6?`${(v/1e6).toFixed(1)}M`:v>=1e3?`${(v/1e3).toFixed(1)}K`:v.toString()}function w(v){return new Date(v).toLocaleString()}function u(v,S){C.value={show:!0,message:v,type:S},setTimeout(()=>{C.value.show=!1},3e3)}return(v,S)=>(r(),f("div",ds,[S[8]||(S[8]=t("h3",{class:"title"},"Save & Load",-1)),t("div",ps,[t("button",{class:"action-button save-button",onClick:d},S[3]||(S[3]=[t("div",{class:"button-content"},[t("span",{class:"icon"},"ðŸ’¾"),t("span",null,"Save Game")],-1)])),t("button",{class:"action-button export-button",onClick:k},S[4]||(S[4]=[t("div",{class:"button-content"},[t("span",{class:"icon"},"ðŸ“¤"),t("span",null,"Export Save")],-1)])),t("button",{class:"action-button import-button",onClick:S[0]||(S[0]=A=>c.value=!0)},S[5]||(S[5]=[t("div",{class:"button-content"},[t("span",{class:"icon"},"ðŸ“¥"),t("span",null,"Import Save")],-1)]))]),P.value?(r(),f("div",vs,[S[6]||(S[6]=t("h4",null,"Saved Games",-1)),(r(!0),f(z,null,q(n.value,(A,E)=>(r(),f("div",{key:E,class:"save-item"},[t("div",ms,[t("div",fs,I(h(A)),1),t("div",gs,I(w(A.timestamp)),1)]),t("div",bs,[t("button",{class:"small-button load-button",onClick:R=>p(E)},"Load",8,hs),t("button",{class:"small-button delete-button",onClick:R=>y(E)},"Delete",8,ys)])]))),128))])):(r(),f("div",Ms," No saved games found ")),c.value?(r(),f("div",Ps,[t("div",_s,[S[7]||(S[7]=t("h3",null,"Import Save",-1)),le(t("textarea",{"onUpdate:modelValue":S[1]||(S[1]=A=>b.value=A),placeholder:"Paste your save code here...",class:"import-textarea"},null,512),[[Ve,b.value]]),t("div",ws,[t("button",{class:"action-button",onClick:o},"Import"),t("button",{class:"action-button cancel-button",onClick:S[2]||(S[2]=A=>c.value=!1)},"Cancel")])])])):T("",!0),C.value.show?(r(),f("div",{key:3,class:H(["notification",{success:C.value.type==="success",error:C.value.type==="error"}])},I(C.value.message),3)):T("",!0)]))}}),$s=W(Cs,[["__scopeId","data-v-d492175e"]]),Ss={key:0,class:"offline-progress-modal"},ks={class:"modal-content"},Os={class:"offline-time"},Is={class:"progress-summary"},As={class:"summary-item total"},Gs={class:"value"},Ts={key:0,class:"progress-details"},Es={class:"name"},Fs={class:"detail-info"},Bs={class:"orbit-count"},Ds={class:"earned"},xs={key:1,class:"progress-details"},Rs={class:"name"},Ys={class:"detail-info"},Ns={class:"orbit-count"},Ls={class:"earned"},zs=V({__name:"OfflineProgress",props:{show:{type:Boolean},progress:{}},emits:["close"],setup(s,{emit:e}){const n=e,c=()=>{n("close")},b=P=>{if(P<60)return`${Math.floor(P)} seconds`;const l=Math.floor(P/3600),d=Math.floor(P%3600/60),p=Math.floor(P%60);let y="";return l>0&&(y+=`${l} hour${l>1?"s":""}`),d>0&&(y+=`${y?", ":""}${d} minute${d>1?"s":""}`),p>0&&l===0&&(y+=`${y?", ":""}${p} second${p>1?"s":""}`),y},C=P=>P>=1e6?(P/1e6).toFixed(2)+"M":P>=1e3?(P/1e3).toFixed(1)+"K":Math.floor(P).toLocaleString();return(P,l)=>P.show?(r(),f("div",Ss,[t("div",ks,[l[3]||(l[3]=t("h2",{class:"title"},[t("span",{class:"icon"},"â°"),We(" Welcome Back! ")],-1)),t("div",Os," You were away for "+I(b(P.progress.elapsedTime)),1),t("div",Is,[t("div",As,[l[0]||(l[0]=t("div",{class:"label"},"Total Orbit Points Earned:",-1)),t("div",Gs,I(C(P.progress.totalOPsGained))+" OPs",1)])]),P.progress.planetOrbits.length>0?(r(),f("div",Ts,[l[1]||(l[1]=t("h3",null,"Planet Orbits",-1)),(r(!0),f(z,null,q(P.progress.planetOrbits,(d,p)=>(r(),f("div",{key:`planet-${p}`,class:"detail-item"},[t("div",Es,I(d.planetName),1),t("div",Fs,[t("span",Bs,I(d.orbits)+" orbits",1),t("span",Ds,"+"+I(C(d.opsGained))+" OPs",1)])]))),128))])):T("",!0),P.progress.moonOrbits.length>0?(r(),f("div",xs,[l[2]||(l[2]=t("h3",null,"Moon Orbits",-1)),(r(!0),f(z,null,q(P.progress.moonOrbits,(d,p)=>(r(),f("div",{key:`moon-${p}`,class:"detail-item"},[t("div",Rs,I(d.moonName)+" ("+I(d.planetName)+")",1),t("div",Ys,[t("span",Ns,I(d.orbits)+" orbits",1),t("span",Ls,"+"+I(C(d.opsGained))+" OPs",1)])]))),128))])):T("",!0),t("button",{class:"continue-button",onClick:c}," Continue Playing ")])])):T("",!0)}}),Us=W(zs,[["__scopeId","data-v-8a16df28"]]),qs={class:"animation-container"},js={class:"transformation-text"},Vs={class:"abilities-section"},Ws={class:"ability-name"},Js={class:"ability-description"},Hs=V({__name:"GasGiantTransformation",props:{show:{type:Boolean},planetName:{},planetColor:{},gasGiantColor:{},abilities:{},clickToClose:{type:Boolean}},emits:["close"],setup(s,{emit:e}){const n=s,c=e,b=Y(!1),C=d=>({"Rings of Prosperity":"+20% OP yield","Magnetic Amplifier":"+30% yield for all orbiting moons","Gravitational Well":"Can support 50% more moons","Resource Abundance":"30% cheaper moons"})[d]||"Enhances gas giant capabilities",P=()=>{c("close")},l=()=>{n.clickToClose&&P()};return me(()=>n.show,d=>{d?b.value=!0:setTimeout(()=>{b.value=!1},300)}),(d,p)=>(r(),se(Je,{name:"transform"},{default:Pe(()=>[d.show?(r(),f("div",{key:0,class:"transformation-overlay",onClick:l},[t("div",{class:"transformation-container",onClick:p[0]||(p[0]=Ge(()=>{},["stop"]))},[t("div",qs,[t("div",{class:"planet-visual",style:j({backgroundColor:d.planetColor})},null,4),p[1]||(p[1]=t("div",{class:"effects-layer"},[t("div",{class:"explosion-effect"}),t("div",{class:"ring-effect"})],-1)),t("div",{class:"gas-giant-visual",style:j({backgroundColor:d.gasGiantColor})},null,4)]),t("div",js,[p[3]||(p[3]=t("h2",null,"Transformation Complete!",-1)),t("p",null,I(d.planetName)+" has evolved into a Gas Giant",1),t("div",Vs,[p[2]||(p[2]=t("h3",null,"Special Abilities Unlocked:",-1)),t("ul",null,[(r(!0),f(z,null,q(d.abilities,(y,k)=>(r(),f("li",{key:k},[t("span",Ws,I(y),1),t("span",Js,I(C(y)),1)]))),128))])]),t("button",{class:"continue-button",onClick:P},"Continue")])])])):T("",!0)]),_:1}))}}),Ks=W(Hs,[["__scopeId","data-v-a52dd56e"]]),Xs={class:"orbital-interactions-container"},Qs={class:"alignment-header"},Zs={class:"alignment-icon"},ea={key:0},ta={key:1},sa={key:2},aa={class:"alignment-title"},oa={class:"alignment-time"},na={class:"alignment-description"},ia={class:"alignment-multiplier"},la={class:"multiplier-value"},ra={key:0,class:"gravity-effects-container"},ca={class:"effect-planets"},ua={class:"effect-details"},da={class:"effect-type"},pa={class:"effect-magnitude"},va=V({__name:"OrbitalInteractions",props:{alignments:{},gravitationalEffects:{},celestialBodies:{},showGravitationalEffects:{type:Boolean}},setup(s){const e=s;let n=null;oe(()=>{n=setInterval(()=>{},1e3)}),ce(()=>{n!==null&&clearInterval(n)});const c=N(()=>{const y=Date.now();return e.alignments.filter(k=>y<k.timestamp+k.duration).sort((k,o)=>o.timestamp+o.duration-(k.timestamp+k.duration))}),b=y=>{const k=e.celestialBodies.find(o=>o.id===y);return(k==null?void 0:k.name)||"Unknown Planet"},C=y=>{switch(y){case"conjunction":return"Celestial Conjunction";case"opposition":return"Planetary Opposition";case"resonance":return"Orbital Resonance";default:return"Celestial Event"}},P=y=>{const k=Date.now(),o=y.timestamp+y.duration,h=Math.max(0,o-k);if(h===0)return"Ended";const g=Math.floor(h/1e3)%60;return`${Math.floor(h/(1e3*60))}:${g.toString().padStart(2,"0")}`},l=y=>`+${Math.round((y-1)*100)}%`,d=y=>y==="acceleration"?"Acceleration":"Deceleration",p=y=>`${Math.round(y*100)}%`;return(y,k)=>(r(),f("div",Xs,[Z(He,{name:"alignment",tag:"div",class:"alignments-list"},{default:Pe(()=>[(r(!0),f(z,null,q(c.value,o=>(r(),f("div",{key:o.timestamp,class:H(["alignment-card",o.type])},[t("div",Qs,[t("div",Zs,[o.type==="conjunction"?(r(),f("span",ea,"â˜€ï¸")):o.type==="opposition"?(r(),f("span",ta,"âš›ï¸")):o.type==="resonance"?(r(),f("span",sa,"ðŸ”„")):T("",!0)]),t("div",aa,I(C(o.type)),1),t("div",oa,I(P(o)),1)]),t("div",na,I(o.description),1),t("div",ia,[k[0]||(k[0]=t("span",{class:"multiplier-label"},"Bonus:",-1)),t("span",la,I(l(o.multiplier)),1)])],2))),128))]),_:1}),y.showGravitationalEffects&&y.gravitationalEffects.length>0?(r(),f("div",ra,[k[1]||(k[1]=t("h3",{class:"section-title"},"Gravitational Effects",-1)),(r(!0),f(z,null,q(y.gravitationalEffects,(o,h)=>(r(),f("div",{key:h,class:H(["effect-item",o.type])},[t("div",ca,I(b(o.sourcePlanetId))+" â†’ "+I(b(o.targetPlanetId)),1),t("div",ua,[t("span",da,I(d(o.type)),1),t("span",pa,I(p(o.magnitude)),1)])],2))),128))])):T("",!0)]))}}),ma=W(va,[["__scopeId","data-v-d6e435c0"]]),fa={class:"game-container"},ga={class:"resource-bar"},ba={class:"orbit-paths"},ha={class:"planet-orbit-center"},ya={class:"tabs"},Ma={class:"game-controls"},Pa={key:0},_a={key:0,class:"conversion-controls"},wa={key:1},Ca={key:0,class:"upgrade-section"},$a={key:1,class:"upgrade-section"},Sa={key:2,class:"upgrade-section"},ka={key:3,class:"upgrade-section"},Oa={class:"gas-giant-header"},Ia={class:"gas-giant-title"},Aa={class:"gas-giant-abilities"},Ga={class:"ability-name"},Ta={class:"ability-description"},Ea={key:2},Fa={class:"interactions-container"},Ba={key:0,class:"no-interactions"},Da={key:3},xa={key:4},Ra={class:"settings-section"},Ya={class:"setting-item"},Na={key:0,class:"setting-item"},La={class:"setting-item"},za={class:"setting-item"},Ua={class:"setting-item"},qa=V({__name:"Game",setup(s){const e=Ee();gt();const n=bt(e.celestialBodies),c=Y("purchase"),b=Y(null),C=Y(window.innerWidth<768),P=Y(null),l=Y(!1);let d=null;const p=()=>{C.value=window.innerWidth<768};oe(()=>{window.addEventListener("resize",p),p();const M=e.checkOfflineProgress();M&&M.totalOPsGained>0&&(P.value=M,l.value=!0),d=setInterval(()=>{const i=n.checkForAlignments();n.checkForGravitationalEffects(),n.calculatePlanetaryGravitationalInteractions(),i&&console.log("New alignment:",i.description)},1e3)}),ce(()=>{window.removeEventListener("resize",p),d!==null&&clearInterval(d)});const y=Y(new Map),k=M=>y.value.get(M)||{x:0,y:0},o=M=>{const i=C.value?40:60;return M*i},h=M=>{b.value=M,c.value="upgrade"},g=N(()=>{const i=e.planets.value.length;return Math.floor(10*Math.pow(1.5,i))}),w=M=>e.getMoonCostForPlanet(M,5),u=M=>{var te;const i=e.getMaxMoonsForPlanet(M);return(((te=M.moons)==null?void 0:te.length)||0)<i},v=N(()=>e.planets.value.some(M=>M.moons&&M.moons.length>0)),S=()=>{e.purchasePlanet(g.value)},A=M=>{const i=e.planets.value.find(B=>B.id===M);i&&e.purchaseMoon(M,w(i))},E=()=>{e.convertToMassPoints(10)},R=M=>{e.upgradeMass(M)},F=M=>{switch(M){case"Rings of Prosperity":return"+20% OP yield from this gas giant";case"Magnetic Amplifier":return"+30% OP yield from all moons orbiting this gas giant";case"Gravitational Well":return"50% more moon capacity";case"Resource Abundance":return"30% cheaper moons";default:return""}},K=()=>{l.value=!1},ee=()=>{e.showTransformation.value=!1,e.transformingPlanet.value=null},L=()=>{e.updateSettings(e.settings.value)},J=()=>{confirm("Are you sure you want to reset your game? All progress will be lost.")&&e.resetGame()};return(M,i)=>{var B,te,ie,ne;return r(),f(z,null,[t("div",fa,[t("div",ga,[Z(Oe,{value:O(e).orbitPoints.value,type:"orbit"},null,8,["value"]),Z(Oe,{value:O(e).massPoints.value,type:"mass"},null,8,["value"])]),t("div",{class:H(["solar-system",{"mobile-view":C.value}])},[t("div",ba,[(r(!0),f(z,null,q(O(e).planets.value.length,$=>(r(),f("div",{key:`orbit-path-${$}`,class:"orbit-path",style:j({width:`${o($)}px`,height:`${o($)}px`})},null,4))),128))]),O(e).star.value?(r(),se(Ot,{key:0,star:O(e).star.value,showLabel:!0},null,8,["star"])):T("",!0),t("div",ha,[(r(!0),f(z,null,q(O(e).planets.value,$=>(r(),f("div",{key:$.id},[Z(Ft,{planet:$,addOrbitPoints:O(e).addOrbitPoints,showLabel:!0,onClick:D=>h($.id)},{default:Pe(()=>[(r(!0),f(z,null,q($.moons,D=>(r(),se(xt,{key:D.id,moon:D,planetPosition:k($.id),addOrbitPoints:O(e).addOrbitPoints,showLabel:!0,onClick:Ge(fe=>h(D.id),["stop"])},null,8,["moon","planetPosition","addOrbitPoints","onClick"]))),128))]),_:2},1032,["planet","addOrbitPoints","onClick"])]))),128))])],2),t("div",ya,[t("button",{class:H(["tab-button",{active:c.value==="purchase"}]),onClick:i[0]||(i[0]=$=>c.value="purchase")}," Purchase ",2),t("button",{class:H(["tab-button",{active:c.value==="upgrade"}]),onClick:i[1]||(i[1]=$=>c.value="upgrade")}," Upgrade ",2),t("button",{class:H(["tab-button",{active:c.value==="interactions"}]),onClick:i[2]||(i[2]=$=>c.value="interactions")}," Interactions ",2),t("button",{class:H(["tab-button",{active:c.value==="save"}]),onClick:i[3]||(i[3]=$=>c.value="save")}," Save/Load ",2),t("button",{class:H(["tab-button",{active:c.value==="settings"}]),onClick:i[4]||(i[4]=$=>c.value="settings")}," Settings ",2)]),t("div",Ma,[c.value==="purchase"?(r(),f("div",Pa,[Z(qt,{cost:g.value,availableOPs:O(e).orbitPoints.value,onPurchase:S},null,8,["cost","availableOPs"]),(r(!0),f(z,null,q(O(e).planets.value,$=>(r(),f("div",{key:`moon-purchase-${$.id}`},[u($)?(r(),se(Qt,{key:0,planet:$,cost:w($),availableOPs:O(e).orbitPoints.value,onPurchase:()=>A($.id)},null,8,["planet","cost","availableOPs","onPurchase"])):T("",!0)]))),128)),O(e).orbitPoints.value>=10?(r(),f("div",_a,[t("button",{onClick:E,class:"convert-button"}," Convert 10 OPs to 1 Mass Point ")])):T("",!0)])):c.value==="upgrade"?(r(),f("div",wa,[O(e).star.value?(r(),f("div",Ca,[i[10]||(i[10]=t("h3",null,"Star",-1)),Z(ve,{body:O(e).star.value,availableMPs:O(e).massPoints.value,onUpgrade:R},null,8,["body","availableMPs"])])):T("",!0),O(e).planets.value.length>0?(r(),f("div",$a,[i[11]||(i[11]=t("h3",null,"Planets",-1)),(r(!0),f(z,null,q(O(e).planets.value,$=>(r(),se(ve,{key:`upgrade-${$.id}`,body:$,availableMPs:O(e).massPoints.value,onUpgrade:R},null,8,["body","availableMPs"]))),128))])):T("",!0),v.value?(r(),f("div",Sa,[i[12]||(i[12]=t("h3",null,"Moons",-1)),(r(!0),f(z,null,q(O(e).planets.value,$=>(r(),f(z,{key:`moon-upgrade-${$.id}`},[(r(!0),f(z,null,q($.moons||[],D=>(r(),se(ve,{key:`upgrade-${D.id}`,body:D,availableMPs:O(e).massPoints.value,onUpgrade:R},null,8,["body","availableMPs"]))),128))],64))),128))])):T("",!0),O(e).gasGiants.value.length>0?(r(),f("div",ka,[i[14]||(i[14]=t("h3",null,"Gas Giants",-1)),(r(!0),f(z,null,q(O(e).gasGiants.value,$=>(r(),f("div",{key:`gas-giant-${$.id}`,class:"gas-giant-card"},[t("div",Oa,[t("div",{class:"gas-giant-icon",style:j({backgroundColor:$.color})},null,4),t("div",Ia,I($.name),1)]),t("div",Aa,[i[13]||(i[13]=t("h4",null,"Special Abilities:",-1)),t("ul",null,[(r(!0),f(z,null,q($.specialAbilities||[],D=>(r(),f("li",{key:D,class:"ability-item"},[t("span",Ga,I(D),1),t("span",Ta,I(F(D)),1)]))),128))])]),Z(ve,{body:$,availableMPs:O(e).massPoints.value,onUpgrade:R},null,8,["body","availableMPs"])]))),128))])):T("",!0)])):c.value==="interactions"?(r(),f("div",Ea,[t("div",Fa,[i[16]||(i[16]=t("h3",{class:"section-title"},"Orbital Interactions",-1)),i[17]||(i[17]=t("p",{class:"section-description"}," Planets can influence each other through gravitational effects and alignments, providing bonuses to resource generation. ",-1)),Z(ma,{alignments:O(n).alignments.value,"gravitational-effects":O(n).gravitationalEffects.value,"celestial-bodies":O(e).celestialBodies.value,"show-gravitational-effects":!0},null,8,["alignments","gravitational-effects","celestial-bodies"]),O(n).alignments.value.length===0?(r(),f("div",Ba,i[15]||(i[15]=[t("p",null,"No active alignments. Planets may occasionally align to provide resource bonuses.",-1)]))):T("",!0)])])):c.value==="save"?(r(),f("div",Da,[Z($s)])):c.value==="settings"?(r(),f("div",xa,[t("div",Ra,[i[24]||(i[24]=t("h3",null,"Game Settings",-1)),t("div",Ya,[i[18]||(i[18]=t("label",{for:"autosave-toggle"},"Autosave",-1)),le(t("input",{id:"autosave-toggle",type:"checkbox","onUpdate:modelValue":i[5]||(i[5]=$=>O(e).settings.value.autosaveEnabled=$),onChange:L},null,544),[[ue,O(e).settings.value.autosaveEnabled]])]),O(e).settings.value.autosaveEnabled?(r(),f("div",Na,[i[20]||(i[20]=t("label",{for:"autosave-interval"},"Autosave Interval (minutes)",-1)),le(t("select",{id:"autosave-interval","onUpdate:modelValue":i[6]||(i[6]=$=>O(e).settings.value.autosaveInterval=$),onChange:L},i[19]||(i[19]=[t("option",{value:"1"},"1 minute",-1),t("option",{value:"5"},"5 minutes",-1),t("option",{value:"10"},"10 minutes",-1),t("option",{value:"30"},"30 minutes",-1)]),544),[[Ke,O(e).settings.value.autosaveInterval]])])):T("",!0),t("div",La,[i[21]||(i[21]=t("label",{for:"sound-toggle"},"Sound Effects",-1)),le(t("input",{id:"sound-toggle",type:"checkbox","onUpdate:modelValue":i[7]||(i[7]=$=>O(e).settings.value.soundEnabled=$),onChange:L},null,544),[[ue,O(e).settings.value.soundEnabled]])]),t("div",za,[i[22]||(i[22]=t("label",{for:"effects-toggle"},"Particle Effects",-1)),le(t("input",{id:"effects-toggle",type:"checkbox","onUpdate:modelValue":i[8]||(i[8]=$=>O(e).settings.value.particleEffects=$),onChange:L},null,544),[[ue,O(e).settings.value.particleEffects]])]),t("div",Ua,[i[23]||(i[23]=t("label",{for:"dark-mode-toggle"},"Dark Mode",-1)),le(t("input",{id:"dark-mode-toggle",type:"checkbox","onUpdate:modelValue":i[9]||(i[9]=$=>O(e).settings.value.darkMode=$),onChange:L},null,544),[[ue,O(e).settings.value.darkMode]])]),t("div",{class:"setting-actions"},[t("button",{onClick:J,class:"danger-button"},"Reset Game")])])])):T("",!0)])]),P.value?(r(),se(Us,{key:0,show:l.value,progress:P.value,onClose:K},null,8,["show","progress"])):T("",!0),O(e).transformingPlanet.value?(r(),se(Ks,{key:1,show:O(e).showTransformation.value,planetName:((B=O(e).transformingPlanet.value)==null?void 0:B.name)||"",planetColor:((te=O(e).transformingPlanet.value)==null?void 0:te.originalColor)||"#888888",gasGiantColor:((ie=O(e).transformingPlanet.value)==null?void 0:ie.color)||"#FFA500",abilities:((ne=O(e).transformingPlanet.value)==null?void 0:ne.specialAbilities)||[],onClose:ee},null,8,["show","planetName","planetColor","gasGiantColor","abilities"])):T("",!0)],64)}}}),ja=W(qa,[["__scopeId","data-v-3e76211c"]]),Va={class:"game-page"},Wa=V({__name:"index",setup(s){return(e,n)=>(r(),f("main",Va,[Z(ja)]))}}),Qa=W(Wa,[["__scopeId","data-v-8a1c7a19"]]);export{Qa as default};
